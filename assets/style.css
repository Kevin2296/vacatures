:root{
  --bg:#06060a; --fg:#fff;
  --muted:rgba(255,255,255,.78);
  --muted2:rgba(255,255,255,.55);
  --gold1:#ffe2b2; --gold2:#ff8a1f;
  --shadow: 0 22px 70px rgba(0,0,0,.60);
}

html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
*{box-sizing:border-box}
button{touch-action:manipulation}

/* Background: luxe kerst */
.bg{
  position:fixed; inset:0; pointer-events:none; overflow:hidden;
  background:
    radial-gradient(1000px 560px at 18% 8%, rgba(255,138,31,.26), transparent 62%),
    radial-gradient(880px 620px at 82% 22%, rgba(255,226,178,.20), transparent 62%),
    radial-gradient(980px 780px at 50% 120%, rgba(255,138,31,.14), transparent 62%),
    linear-gradient(#050507, #090913);
  filter:saturate(1.10);
}
.vignette{
  position:absolute; inset:-20%;
  background: radial-gradient(900px 700px at 50% 45%, transparent 40%, rgba(0,0,0,.55) 70%);
  opacity:.9;
}

/* Stars + glitter */
.stars{
  position:absolute; inset:-20%;
  background-image:
    radial-gradient(2px 2px at 6% 18%, rgba(255,255,255,.38) 40%, transparent 42%),
    radial-gradient(1px 1px at 14% 66%, rgba(255,255,255,.26) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 28% 36%, rgba(255,255,255,.30) 40%, transparent 42%),
    radial-gradient(1px 1px at 44% 12%, rgba(255,255,255,.22) 40%, transparent 42%),
    radial-gradient(2px 2px at 58% 74%, rgba(255,255,255,.18) 40%, transparent 42%),
    radial-gradient(1px 1px at 72% 30%, rgba(255,255,255,.22) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 86% 64%, rgba(255,255,255,.20) 40%, transparent 42%),
    radial-gradient(2px 2px at 94% 22%, rgba(255,255,255,.16) 40%, transparent 42%);
  opacity:.55;
  animation: drift 16s ease-in-out infinite alternate;
}
.glitter{
  position:absolute; inset:0; opacity:.32;
  background:
    radial-gradient(3px 3px at 15% 35%, rgba(255,226,178,.95) 30%, transparent 35%),
    radial-gradient(2px 2px at 65% 25%, rgba(255,138,31,.95) 30%, transparent 35%),
    radial-gradient(3px 3px at 78% 62%, rgba(255,226,178,.80) 30%, transparent 35%),
    radial-gradient(2px 2px at 40% 78%, rgba(255,138,31,.80) 30%, transparent 35%),
    radial-gradient(2.6px 2.6px at 22% 82%, rgba(255,226,178,.70) 30%, transparent 35%),
    radial-gradient(2px 2px at 88% 18%, rgba(255,138,31,.70) 30%, transparent 35%),
    radial-gradient(3px 3px at 52% 18%, rgba(255,226,178,.55) 30%, transparent 35%);
  animation: twinkle 3.8s ease-in-out infinite;
}

/* Subtle christmas lights line near top */
.lights{
  position:absolute; left:-10%; right:-10%; top:-10px; height:110px;
  opacity:.26;
  background:
    radial-gradient(14px 14px at 10% 40px, rgba(255,138,31,.95) 30%, transparent 60%),
    radial-gradient(12px 12px at 22% 48px, rgba(255,226,178,.90) 30%, transparent 60%),
    radial-gradient(13px 13px at 35% 36px, rgba(255,138,31,.90) 30%, transparent 60%),
    radial-gradient(12px 12px at 48% 52px, rgba(255,226,178,.84) 30%, transparent 60%),
    radial-gradient(14px 14px at 60% 40px, rgba(255,138,31,.90) 30%, transparent 60%),
    radial-gradient(12px 12px at 73% 50px, rgba(255,226,178,.82) 30%, transparent 60%),
    radial-gradient(13px 13px at 86% 42px, rgba(255,138,31,.88) 30%, transparent 60%),
    linear-gradient(to bottom, rgba(255,226,178,.40), transparent 72%);
  filter: blur(0.2px);
}

/* Snow layers (dense) */
.snow{
  position:absolute; inset:-30% 0 -30% 0;
  transform:translateY(-12%);
  background-repeat:repeat;
  mix-blend-mode: screen;
  animation: snow 9s linear infinite;
}
.snow1{
  opacity:.72;
  background-size: 200px 200px;
  background-image:
    radial-gradient(2px 2px at 8% 10%, rgba(255,255,255,.76) 40%, transparent 42%),
    radial-gradient(2px 2px at 18% 42%, rgba(255,255,255,.64) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 28% 18%, rgba(255,255,255,.60) 40%, transparent 42%),
    radial-gradient(2px 2px at 36% 62%, rgba(255,255,255,.66) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 46% 30%, rgba(255,255,255,.58) 40%, transparent 42%),
    radial-gradient(2px 2px at 58% 12%, rgba(255,255,255,.64) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 66% 44%, rgba(255,255,255,.58) 40%, transparent 42%),
    radial-gradient(2px 2px at 78% 26%, rgba(255,255,255,.64) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 86% 60%, rgba(255,255,255,.56) 40%, transparent 42%),
    radial-gradient(2px 2px at 94% 34%, rgba(255,255,255,.62) 40%, transparent 42%);
  animation-duration: 7s;
}
.snow2{
  opacity:.48;
  background-size: 280px 280px;
  background-image:
    radial-gradient(3px 3px at 12% 30%, rgba(255,255,255,.48) 40%, transparent 42%),
    radial-gradient(2px 2px at 22% 70%, rgba(255,255,255,.36) 40%, transparent 42%),
    radial-gradient(3px 3px at 38% 40%, rgba(255,255,255,.42) 40%, transparent 42%),
    radial-gradient(2px 2px at 56% 62%, rgba(255,255,255,.32) 40%, transparent 42%),
    radial-gradient(3px 3px at 70% 34%, rgba(255,255,255,.40) 40%, transparent 42%),
    radial-gradient(2px 2px at 86% 52%, rgba(255,255,255,.30) 40%, transparent 42%);
  animation-duration: 10s;
}
.snow3{
  opacity:.34;
  background-size: 400px 400px;
  background-image:
    radial-gradient(4px 4px at 18% 62%, rgba(255,255,255,.32) 40%, transparent 42%),
    radial-gradient(3px 3px at 40% 80%, rgba(255,255,255,.24) 40%, transparent 42%),
    radial-gradient(4px 4px at 68% 74%, rgba(255,255,255,.26) 40%, transparent 42%),
    radial-gradient(3px 3px at 86% 88%, rgba(255,255,255,.20) 40%, transparent 42%);
  animation-duration: 14s;
}
.snow4{
  opacity:.24;
  background-size: 560px 560px;
  background-image:
    radial-gradient(5px 5px at 20% 20%, rgba(255,255,255,.20) 40%, transparent 42%),
    radial-gradient(4px 4px at 64% 28%, rgba(255,255,255,.16) 40%, transparent 42%),
    radial-gradient(5px 5px at 84% 18%, rgba(255,255,255,.14) 40%, transparent 42%);
  animation-duration: 18s;
}

@keyframes drift{
  from{transform:translate3d(-1.5%, -1.0%, 0) scale(1)}
  to{transform:translate3d(1.5%, 1.0%, 0) scale(1.02)}
}
@keyframes twinkle{0%,100%{opacity:.22}50%{opacity:.38}}
@keyframes snow { to { transform:translateY(12%); } }

/* Layout */
.wrap{position:fixed; inset:0; display:grid; place-items:center; padding:24px}
.card{
  width:min(600px,100%);
  border-radius:28px;
  background:rgba(255,255,255,.07);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  padding:26px 22px;
  text-align:center;
  backdrop-filter: blur(12px);
}

/* Gift icon (more iOS-like) */
.giftapp{
  width:152px; height:116px;
  margin:2px auto 14px;
  position:relative;
  filter: drop-shadow(0 18px 55px rgba(0,0,0,.35));
}
.stack{
  position:absolute; inset:0;
  border-radius:30px;
  background:rgba(255,255,255,.07);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(8px);
}
.stack.s1{ transform:rotate(-8deg) translate(-2px,1px); opacity:.35; }
.stack.s2{ transform:rotate(6deg) translate(2px,2px); opacity:.28; }

.front{
  position:absolute; inset:0;
  border-radius:30px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(10px);
  overflow:hidden;
}
.front:after{
  content:"";
  position:absolute; inset:-35% -35%;
  background: radial-gradient(240px 140px at 20% 20%, rgba(255,226,178,.18), transparent 60%),
              radial-gradient(240px 140px at 70% 70%, rgba(255,138,31,.12), transparent 60%);
  transform:rotate(-14deg);
  opacity:.9;
  pointer-events:none;
}

.gift{ position:absolute; left:50%; top:50%; transform:translate(-50%,-42%); width:86px; height:74px; }
.box{
  position:absolute; left:0; right:0; bottom:0; height:48px;
  border-radius:18px;
  background:rgba(0,0,0,.08);
  border:1px solid rgba(255,255,255,.10);
}
.lid{
  position:absolute; left:0; right:0; top:18px; height:14px;
  border-radius:14px;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
  box-shadow:0 0 22px rgba(255,138,31,.30);
  transform-origin: 50% 70%;
}
.ribbon.v{
  position:absolute; left:50%; top:18px; bottom:0; width:12px;
  transform:translateX(-50%);
  border-radius:10px;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
}
.ribbon.h{
  position:absolute; left:0; right:0; top:18px; height:10px;
  border-radius:10px;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
}
.bow{
  position:absolute; top:2px; width:28px; height:18px;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
  border-radius: 18px 18px 18px 6px;
  box-shadow:0 0 18px rgba(255,138,31,.25);
}
.bow.left{ left:16px; transform:rotate(-14deg); }
.bow.right{
  right:16px;
  transform:rotate(14deg) scaleX(-1);
}

/* idle subtle float */
.gfx3d{ transform: translateZ(0); }
.giftapp{ animation: floaty 3.2s ease-in-out infinite; transform: translateZ(0); }
@keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}

/* easter egg: box opens */
.giftapp.open .lid{ animation: lidOpen 900ms cubic-bezier(.2,.9,.2,1) both; }
.giftapp.open .bow{ animation: bowPop 900ms cubic-bezier(.2,.9,.2,1) both; }
.giftapp.open .front:before{
  content:"âœ¨";
  position:absolute; left:18px; top:16px;
  font-size:18px; opacity:0;
  animation: sparkle 900ms ease both;
}
@keyframes lidOpen{
  0%{ transform:translateY(0) rotateX(0deg); }
  40%{ transform:translateY(-10px) rotateX(55deg); }
  100%{ transform:translateY(-2px) rotateX(10deg); }
}
@keyframes bowPop{
  0%{ opacity:1; transform:translateY(0) scale(1); }
  45%{ transform:translateY(-10px) scale(1.06); }
  100%{ transform:translateY(-2px) scale(1.01); }
}
@keyframes sparkle{
  0%{ opacity:0; transform:translateY(6px) scale(.9) rotate(-10deg); }
  35%{ opacity:.9; }
  100%{ opacity:0; transform:translateY(-10px) scale(1.2) rotate(10deg); }
}

/* Badge + heading */
.badge{
  display:inline-flex; gap:10px; align-items:center;
  padding:10px 14px; border-radius:999px;
  background:rgba(255,255,255,.07);
  border:1px solid rgba(255,255,255,.12);
  margin-bottom:14px;
}
.spark{
  width:10px;height:10px;border-radius:999px;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
  box-shadow:0 0 18px rgba(255,138,31,.55);
  animation: pulseDot 1.9s ease-in-out infinite;
}
@keyframes pulseDot{
  0%,100%{transform:scale(1); filter:saturate(1)}
  50%{transform:scale(1.35); filter:saturate(1.1)}
}

h1{margin:6px 0 10px; font-size:30px; letter-spacing:.2px}
p{margin:0 0 14px; color:var(--muted); line-height:1.45; font-size:16px}
.bigline{margin:10px 0 18px; color:var(--muted2); font-size:15px; line-height:1.55}

/* Buttons */
.btn{
  width:100%;
  padding:16px 18px;
  border:0;
  border-radius:18px;
  font-size:18px;
  font-weight:950;
  cursor:pointer;
  color:#140b00;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
  box-shadow:0 14px 42px rgba(255,138,31,.30);
  margin-top:10px;
  transform:translateY(0);
  transition:transform .15s ease, filter .2s ease, opacity .2s ease;
}
.btn:active{transform:translateY(1px); filter:saturate(1.04)}
.btn:disabled{opacity:.55; cursor:not-allowed}
.hint{margin-top:10px; font-size:13px; color:rgba(255,255,255,.62)}
.tiny{margin-top:12px; font-size:12px; color:rgba(255,255,255,.45)}

/* Loader */
.loader{
  position:fixed; inset:0; display:none; place-items:center;
  background:rgba(0,0,0,.78);
  backdrop-filter: blur(6px);
  z-index:50;
}
.loader.show{display:grid; animation:fade .35s ease both}
@keyframes fade{from{opacity:0}to{opacity:1}}
.loadbox{
  width:min(520px,92%);
  border-radius:26px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  padding:24px 20px;
  text-align:center;
}
.loadtitle{font-weight:950; letter-spacing:.2px; margin:0 0 8px}
.loadsub{margin:0 0 14px; color:rgba(255,255,255,.72)}
.bar{height:10px; border-radius:999px; overflow:hidden; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.10)}
.bar > div{height:100%; width:0%; border-radius:999px; background:linear-gradient(90deg,var(--gold1),var(--gold2)); animation:fill 1.1s ease forwards}
@keyframes fill{to{width:100%}}

/* Player */
.player{position:fixed; inset:0; display:none; background:#000; z-index:40}
.player.show{display:block; animation:fade .45s ease both}
.player iframe{position:absolute; inset:0; width:100%; height:100%; border:0; background:#000}

.top{
  position:absolute; left:0; right:0; top:0;
  padding:14px;
  display:flex; gap:10px; justify-content:space-between; align-items:center;
  background:linear-gradient(to bottom, rgba(0,0,0,.70), transparent);
  z-index:45;
}
.topright{display:flex; gap:10px; align-items:center}
.chip{
  font-size:12px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(0,0,0,.35);
  color:rgba(255,255,255,.86);
  backdrop-filter: blur(8px);
}
.btn-chip{cursor:pointer}

/* Center modal after part 1 */
.overlay{
  position:absolute; inset:0;
  background:rgba(0,0,0,.52);
  display:none;
  z-index:58;
}
.overlay.show{display:block; animation:fade .25s ease both}

.modal{
  position:absolute; inset:0;
  display:none;
  place-items:center;
  padding:18px;
  z-index:60;
}
.modal.show{display:grid; animation:fade .25s ease both}
.modalbox{
  width:min(560px,100%);
  border-radius:22px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(18,18,22,.45);
  backdrop-filter: blur(14px);
  box-shadow:0 22px 80px rgba(0,0,0,.62);
  padding:18px 16px;
  text-align:left;
}
.modalbox h2{margin:0 0 6px; font-size:18px}
.modalbox p{margin:0 0 12px; color:rgba(255,255,255,.78); font-size:13.5px; line-height:1.35}

.row{display:flex; gap:10px}
.mini{
  flex:1;
  padding:12px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.08);
  color:rgba(255,255,255,.92);
  font-weight:950;
  cursor:pointer;
  transition:opacity .2s ease;
}
.mini:disabled{opacity:.55; cursor:not-allowed}
.mini.primary{
  border:0;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
  color:#140b00;
}

/* End */
.end{
  position:absolute; inset:0; display:none; place-items:center; padding:24px;
  background:radial-gradient(900px 600px at 50% 20%, rgba(255,138,31,.18), transparent 60%), rgba(0,0,0,.74);
  backdrop-filter: blur(6px);
  z-index:70;
}
.end.show{display:grid; animation:fade .5s ease both}
.end .box{
  width:min(520px,100%);
  border-radius:26px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  padding:26px 22px;
  text-align:center;
}
.end h3{margin:0 0 10px; font-size:24px}
.end p{margin:0; color:rgba(255,255,255,.78); font-size:16px; line-height:1.5}
.sig{margin-top:14px; font-weight:950; letter-spacing:.2px}
.end .row{margin-top:16px}

/* Finale screen */
.finale{
  position:absolute; inset:0; display:none; place-items:center; padding:24px;
  background:radial-gradient(900px 600px at 50% 20%, rgba(255,138,31,.20), transparent 60%), rgba(0,0,0,.78);
  backdrop-filter: blur(8px);
  z-index:90;
}
.finale.show{display:grid; animation:fade .55s ease both}
.finale-box{
  width:min(560px,100%);
  border-radius:28px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  padding:26px 22px;
  text-align:center;
  position:relative;
  overflow:hidden;
}
.finale-box:before{
  content:"";
  position:absolute; inset:-40%;
  background: radial-gradient(320px 160px at 30% 20%, rgba(255,226,178,.22), transparent 60%),
              radial-gradient(380px 190px at 70% 60%, rgba(255,138,31,.16), transparent 60%);
  transform: rotate(-12deg);
  opacity:.9;
  pointer-events:none;
}
.finale-box > *{ position:relative; z-index:1; }
.finale-top{font-size:22px; margin-bottom:6px}
.finale-box h3{margin:0 0 10px; font-size:26px}
.finale-box p{margin:0; color:rgba(255,255,255,.80); font-size:16px; line-height:1.5}

/* Closed screen */
.closed{
  position:absolute; inset:0; display:none; place-items:center; padding:24px;
  background:rgba(0,0,0,.82);
  backdrop-filter: blur(8px);
  z-index:95;
}
.closed.show{display:grid; animation:fade .5s ease both}
.closed-box{
  width:min(520px,100%);
  border-radius:26px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  padding:26px 22px;
  text-align:center;
}
.closed-top{font-size:22px; margin-bottom:6px}
.closed-box h3{margin:0 0 10px; font-size:26px}
.closed-box p{margin:0; color:rgba(255,255,255,.80); font-size:15.5px; line-height:1.5}

/* Particles */
.particles{position:fixed; inset:0; pointer-events:none; z-index:9999}
.particle{
  position:fixed;
  left:0; top:0;
  transform:translate(-50%,-50%);
  font-size:18px;
  will-change: transform, opacity;
  opacity:0;
  filter: drop-shadow(0 10px 22px rgba(255,138,31,.35));
}
@keyframes burst{
  0%   { opacity:0; transform:translate(var(--x), var(--y)) scale(.55) rotate(0deg); }
  10%  { opacity:1; }
  78%  { opacity:1; }
  100% { opacity:0; transform:translate(calc(var(--x) + var(--dx)), calc(var(--y) + var(--dy))) scale(1.25) rotate(var(--rot)); }
}

/* Flash (makes explosions feel punchy) */
.flash{
  position:fixed; inset:0;
  pointer-events:none;
  opacity:0;
  z-index:9998;
  background: radial-gradient(520px 260px at 50% 70%, rgba(255,226,178,.30), transparent 70%),
              radial-gradient(420px 220px at 45% 62%, rgba(255,138,31,.18), transparent 70%);
}
.flash.show{ animation: flash 850ms ease-out both; }
@keyframes flash{
  0%{opacity:0}
  16%{opacity:.44}
  100%{opacity:0}
}
